<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	
	<meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Getting Trippy with Canvas and MIDI | Fun With Triangles</title>
    <meta name="description" content="Alex Kempton works with Front-End web technologies.">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="/js/modernizr.js"></script>

    <script src="https://use.typekit.net/kbv3itz.js"></script>
	<script>try{Typekit.load({ async: true });}catch(e){}</script>

	<link rel="icon" type="image/png" href="/images/fav/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="/images/fav/favicon-16x16.png" sizes="16x16" />


	<link rel="stylesheet" href="/css/app.css" />

</head>
<body>

 
<header am-SiteHeader>
	
	<div am-SiteHeader-Header="small" data-triEffect="/images/header_wide.svg">
	<a href="/"><canvas>Fun with Triangles</canvas></a>
</div>
	
	<h1>Getting Trippy with Canvas and MIDI</h1>
	<p am-txt="lead">
		How I teamed up with a techno producer to build a fully audio reactive visual system that runs on web technologies.
	</p>

	<ul am-FeatureList>
		<li am-FeatureList-Title>Skills involved:</li>
		<li>Three.js</li>
		<li>Canvas</li>
		<li>Web MIDI API</li>
		<li>Web Audio API</li>
		<li am-FeatureList-Link>View project: <a href="http://polyop.uk">polyop.uk</a></li>
	</ul>

</header>
<article>
	<div am-Strip>
		<div am-ContentContainer>

			<h2>Experimenting with Canvas</h2>
			<p>Towards the end of 2014 I was dipping my toe into HTML5 Canvas. The canvas element allows a programmer to “draw” whatever they like onto it, using Javascript. It’s uses range from boring graphs to incredible games. My aim was to just experiment with it and hopefully create something visually interesting along the way.</p>

			<figure am-ArticleMedia>
				<p data-height="400" data-theme-id="0" data-slug-hash="dfpHq" data-default-tab="result" data-user="iamalexkempton" class='codepen'>See the Pen <a href='http://codepen.io/iamalexkempton/pen/dfpHq/'>Accidental trippiness</a> by iamalexkempton (<a href='http://codepen.io/iamalexkempton'>@iamalexkempton</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
			
				<figcaption am-ArticleMedia-Caption>“Accidental Trippiness”: I created this while fooling around with spirals  canvas.</figcaption>
			</figure>
	
			<p>I was using Codepen for a lot of these experiments, the ability to quickly “fork” a pen was nice and it also gave me an easy way to share what I was doing. A music producer friend of mine, Jack Driscoll, liked what I was making and proposed we collaborate on something that reacts to music. A year later and what we’ve created is quite something.</p>
	
			<figure am-ArticleMedia>
				<div am-VidStretch>
					<iframe  src="https://player.vimeo.com/video/147780663?api=1&player_id=vimeoplayer&color=12F4FF" id="vimeoplayer" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
				</div>
				<figcaption am-ArticleMedia-Caption>Polyop promo video</figcaption>
			</figure>
			
			<p>Polyop is the name of the audio visual duo we have formed. The visuals are being generated real-time, the whole thing running inside Google Chrome. The software is currently in Beta mode and we like to call it “Polygen”.</p>

			<h2>It’s reactive!</h2>
		
			<figure am-ArticleMedia="first">
				<img src="/images/gifs/polygen_sprite.gif" alt="Animated cartoon face">
				<figcaption am-ArticleMedia-Caption>2D sprites cycle in time with the beat</figcaption>
			</figure>
			

			<p>The Polygen visual system is reactive in three ways:</p>

			<ul>
				<li><strong>Frequency:</strong> Polygen analyses a song’s frequency so things can bounce or flash to the lows, medium or high range of the track.</li>
				<li><strong>BPM:</strong> Using an external BPM detection tool, Polygen takes in a MIDI clock which allows the visuals to steadily work in time with the beat, such as the 2D sprites that are incorporated.</li>
				<li><strong>MIDI:</strong> Real time note information coming out of a sequencer can be sent to the system, allowing it to visually react to specific parts of the composed track.</li>
					
			</ul>

			<h2>Three.js</h2>

			<figure am-ArticleMedia="first">
				<img src="/images/gifs/polygen_rgb.gif" alt="Icosahedron with an RGB effect applied">
				<figcaption am-ArticleMedia-Caption>The “RGB Split” pixel shader being applied to a scene</figcaption>
			</figure>

			<p>At the heart of Polygen is Three.js, an awesome Javascript library that makes working with WebGL (How you make 3D graphics with canvas) a little more manageable. One huge advantage to using Three.js is how easy it allows you to implement fun effects through the use of pixel shaders, such as the super cool looking “RGB Split” effect.</p>


			<h2>Fun with hardware</h2>
			<figure am-ArticleMedia="insta">
				<blockquote class="instagram-media" data-instgrm-version="6" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAGFBMVEUiIiI9PT0eHh4gIB4hIBkcHBwcHBwcHBydr+JQAAAACHRSTlMABA4YHyQsM5jtaMwAAADfSURBVDjL7ZVBEgMhCAQBAf//42xcNbpAqakcM0ftUmFAAIBE81IqBJdS3lS6zs3bIpB9WED3YYXFPmHRfT8sgyrCP1x8uEUxLMzNWElFOYCV6mHWWwMzdPEKHlhLw7NWJqkHc4uIZphavDzA2JPzUDsBZziNae2S6owH8xPmX8G7zzgKEOPUoYHvGz1TBCxMkd3kwNVbU0gKHkx+iZILf77IofhrY1nYFnB/lQPb79drWOyJVa/DAvg9B/rLB4cC+Nqgdz/TvBbBnr6GBReqn/nRmDgaQEej7WhonozjF+Y2I/fZou/qAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/70wrgskn55/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A video posted by Polyop (@polyopuk)</a> on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2015-09-19T19:45:09+00:00">Sep 19, 2015 at 12:45pm PDT</time></p></div></blockquote>
				<script async defer src="//platform.instagram.com/en_US/embeds.js"></script>
				<figcaption am-ArticleMedia-Caption>Using a MIDI grid of buttons to sequence visual effects</figcaption>
			</figure>
			

			<p>Amazingly, Chrome now has the ability to work with MIDI instruments. I assume the primary idea behind this will be to allow developers to write all sorts of web based audio apps allowing musicians to plug in a MIDI keyboard (or whatever else). The Polygen system makes use of this functionality, allowing for scenes and effects to be controlled by hardware.</p>
			
			<h2>Keeping the community (and my sanity) in mind</h2>
			<figure am-ArticleMedia="first">
				<img src="/images/gifs/polygen_scenes.gif" alt="Multiple still shots from the Polygen engine">
				<figcaption am-ArticleMedia-Caption>Eventually, anyone could contribute an effect with a single file</figcaption>
			</figure>
			

			<p>One of the funnest parts of creating this software has been making sure I get the architecture right. As it’s grown over the months, I’ve already overhauled the system twice, making sure the code is maintainable. I’m quite happy with how it’s all worked out. The whole thing is modular, you add a new effect by adding a new file to a folder. Scene data is saved in JSON format, so it can easily be saved/swapped out. My ultimate aim for this project is to release it as an open source thing.</p>
			
		</div>	
	</div>
	<div am-Strip="alt">
		<div am-ContentContainer>
			<h2>Let’s make something cool!</h2>
			<p>I’m always interested in working on more projects that push the boundaries of web technology. Whether it’s using 3D libraries such as Three.js; a project that has an audio reactive element to it or you just want to make something that is plain old trippy, feel free to <a href="#contact" data-scrollto="#contact">get in touch</a>.</p>
		</div>
	</div>
</article>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>




<div am-SiteFooter data-triEffect id="contact">
	<canvas am-SiteFooter-Bg></canvas>
	
	<div am-SiteFooter-Inner>
		<h1>Get in touch</h1>
		<p>If you have any ideas for projects, collaborations or just want to say hello, feel free to drop me a line. I'm based in Hackney, London.</p>

		<ul am-SiteFooter-Contact>
			<li>
				<h5>Email</h5> 
				<a href="mailto:alex@funwithtriangles.net">alex@funwithtriangles.net</a>
			</li>
			<li>
				<h5>Phone</h5> 
				+44 (0) 7450 846 211
			</li>
			<li>
				<h5>Instagram:</h5> 
				<a href="https://www.instagram.com/funwithtriangles/">@funwithtriangles</a>
			</li>
			<li>
				<h5>Twitter</h5> 
				<a href="https://twitter.com/funtriangles">@funtriangles</a>
			</li>
		</ul>
		

	</div>
	
</div>

<script src="/js/app.js" ></script>
<script>
	var FunWithTriangles = new FWT();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71984808-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>